<SQLStoredProcedureSpec
	xmlns="bb_appfx_sqlstoredprocedure"
	xmlns:common="bb_appfx_commontypes" 
	ID="43ca6d1b-840c-4e40-90b3-491f586d5b75"
	Name="USR_USP_UPDATE_USR_SPONSORSHIPEXTENSION"
	Description="Update the USR_SPONSORSHIPEXTENSION table."
	Author="Memphis Sellers"
	SPName="USR_USP_UPDATE_USR_SPONSORSHIPEXTENSION"
	>

	<CreateProcedureSQL>
		<![CDATA[
create procedure dbo.USR_USP_UPDATE_USR_SPONSORSHIPEXTENSION (
	@ID uniqueidentifier,
	@INITIALOPPORTUNITYSPONSORSHIPSTATUSCODEID uniqueidentifier,
	@CURRENTOPPORTUNITYSPONSORSHIPSTATUSCODEID uniqueidentifier,
	@CONVERSIONDATE date,
	@DAYSTOCONVERT smallint,
	@CHANGEAGENTID uniqueidentifier = null,
	@DATEADDED datetime,
	@DATECHANGED datetime = null
)
as
begin
	-- do work
	if @CHANGEAGENTID is null
		exec dbo.USP_CHANGEAGENT_GETORCREATECHANGEAGENT @CHANGEAGENTID output;

	if @DATECHANGED is null
		set @DATECHANGED = getdate();
		
	UPDATE [dbo].[USR_SPONSORSHIPEXTENSION]
	   SET 
		   [CONVERSIONDATE] = @CONVERSIONDATE
		  ,[DAYSTOCONVERT] = @DAYSTOCONVERT
		  ,[ADDEDBYID] = @CHANGEAGENTID
		  ,[CHANGEDBYID] = @CHANGEAGENTID
		  ,[DATEADDED] = @DATEADDED
		  ,[DATECHANGED] = @DATECHANGED
		  ,[INITIALOPPORTUNITYSPONSORSHIPSTATUSCODEID] = @INITIALOPPORTUNITYSPONSORSHIPSTATUSCODEID
		  ,[CURRENTOPPORTUNITYSPONSORSHIPSTATUSCODEID] = @CURRENTOPPORTUNITYSPONSORSHIPSTATUSCODEID
	 WHERE [ID] = @ID
 
end

		]]>
	</CreateProcedureSQL>

</SQLStoredProcedureSpec>
